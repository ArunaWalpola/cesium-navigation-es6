import{defined,Ray,IntersectionTests,Cartesian3,SceneMode}from"cesium";import NavigationControl from"./NavigationControl";import Utils from"../core/Utils";var ZoomNavigationControl=function(t,o){NavigationControl.apply(this,arguments),this.name="Zoom "+(o?"In":"Out"),this.text=o?"+":"-",this.cssClass="navigation-control-icon-zoom-"+(o?"in":"out"),this.relativeAmount=2,o&&(this.relativeAmount=1/this.relativeAmount)};ZoomNavigationControl.prototype.relativeAmount=1,ZoomNavigationControl.prototype=Object.create(NavigationControl.prototype),ZoomNavigationControl.prototype.activate=function(){this.zoom(this.relativeAmount)};var cartesian3Scratch=new Cartesian3;ZoomNavigationControl.prototype.zoom=function(t){if(this.isActive=!0,defined(this.terria)){var o=this.terria.scene,i=o.screenSpaceCameraController;if(!i.enableInputs||!i.enableZoom)return;var e,a=o.camera;switch(o.mode){case SceneMode.MORPHING:break;case SceneMode.SCENE2D:a.zoomIn(a.positionCartographic.height*(1-this.relativeAmount));break;default:var n;if(n=defined(this.terria.trackedEntity)?new Cartesian3:Utils.getCameraFocus(this.terria,!1),defined(n))e={direction:a.direction,up:a.up};else{var r=new Ray(a.worldToCameraCoordinatesPoint(o.globe.ellipsoid.cartographicToCartesian(a.positionCartographic)),a.directionWC);n=IntersectionTests.grazingAltitudeLocation(r,o.globe.ellipsoid),e={heading:a.heading,pitch:a.pitch,roll:a.roll}}var s=Cartesian3.subtract(a.position,n,cartesian3Scratch),c=Cartesian3.multiplyByScalar(s,t,s),l=Cartesian3.add(n,c,n);defined(this.terria.trackedEntity)||o.mode===SceneMode.COLUMBUS_VIEW?a.position=l:a.flyTo({destination:l,orientation:e,duration:.5,convert:!1})}}this.isActive=!1};export default ZoomNavigationControl;